alter table humidity_history add day_date date as (date(time_stamp)) stored, 
     drop primary key, add primary key (id, day_date);

alter table humidity_history partition by range columns(day_date) (
  partition p0_before2022 values less than('2022-01-01'),
  partition p2022_01 values less than('2022-02-01'),
  partition p2022_02 values less than('2022-03-01'),
  partition p2022_03 values less than('2022-04-01'),
  partition p2022_04 values less than('2022-05-01'),
  partition p2022_05 values less than('2022-06-01'),
  partition p2022_06 values less than('2022-07-01'),
  partition p2022_07 values less than('2022-08-01'),
  partition p2022_08 values less than('2022-09-01'),
  partition p2022_09 values less than('2022-10-01'),
  partition p2022_10 values less than('2022-11-01'),
  partition p2022_11 values less than('2022-12-01'),
  partition p2022_12 values less than('2023-01-01'),
  partition p2023_01 values less than('2023-02-01'),
  partition p2023_02 values less than('2023-03-01'),
  partition p2023_03 values less than('2023-04-01'),
  partition p2023_04 values less than('2023-05-01'),
  partition p2023_05 values less than('2023-06-01'),
  partition p2023_06 values less than('2023-07-01'),
  partition p2023_07 values less than('2023-08-01'),
  partition p2023_08 values less than('2023-09-01'),
  partition p2023_09 values less than('2023-10-01'),
  partition p2023_10 values less than('2023-11-01'),
  partition p2023_11 values less than('2023-12-01'),
  partition p2023_12 values less than('2024-01-01'),
  partition p9_future values less than(maxvalue));

alter table temperature_history add day_date date as (date(time_stamp)) stored, 
     drop primary key, add primary key (id, day_date);

alter table temperature_history partition by range columns(day_date) (
  partition p0_before2022 values less than('2022-01-01'),
  partition p2022_01 values less than('2022-02-01'),
  partition p2022_02 values less than('2022-03-01'),
  partition p2022_03 values less than('2022-04-01'),
  partition p2022_04 values less than('2022-05-01'),
  partition p2022_05 values less than('2022-06-01'),
  partition p2022_06 values less than('2022-07-01'),
  partition p2022_07 values less than('2022-08-01'),
  partition p2022_08 values less than('2022-09-01'),
  partition p2022_09 values less than('2022-10-01'),
  partition p2022_10 values less than('2022-11-01'),
  partition p2022_11 values less than('2022-12-01'),
  partition p2022_12 values less than('2023-01-01'),
  partition p2023_01 values less than('2023-02-01'),
  partition p2023_02 values less than('2023-03-01'),
  partition p2023_03 values less than('2023-04-01'),
  partition p2023_04 values less than('2023-05-01'),
  partition p2023_05 values less than('2023-06-01'),
  partition p2023_06 values less than('2023-07-01'),
  partition p2023_07 values less than('2023-08-01'),
  partition p2023_08 values less than('2023-09-01'),
  partition p2023_09 values less than('2023-10-01'),
  partition p2023_10 values less than('2023-11-01'),
  partition p2023_11 values less than('2023-12-01'),
  partition p2023_12 values less than('2024-01-01'),
  partition p9_future values less than(maxvalue));
